angular.
	module('example')
	.controller('GettingStartedController', function($scope, supersonic){
		var gamesData = supersonic.data.model('Game');
		var map;
		var loadedGames;
		$scope.$on('mapInitialized', function(evt, evtMap) {
			map = evtMap;
<<<<<<< Updated upstream
			gamesData.findAll().then(function(games){
				for (var i =2; i < games.length; i++){
					currentGame = games[i];
					var contentString = '<b>' + currentGame.Sport + '</b> <br>' + currentGame.Time + '<br><a class="hrefstyle" href="rsvp.html">RSVP</a>'
					var contentWindow = new google.maps.InfoWindow({
						content: contentString
					});
					var gameLocation = new google.maps.LatLng(parseFloat(currentGame.Lat), parseFloat(currentGame.Lng));
					var  testMarker= new google.maps.Marker({position: gameLocation, map: map});
					(function (_contentWindow){
						testMarker.addListener('click', function(){
							_contentWindow.open(map, this);
						});
					})(contentWindow);
				}
				map.panTo(gameLocation);
			})
		});
$scope.rsvpevent = function()
{
var modalView = new supersonic.ui.View("example#settings");
var options = {
  animate: true
}
supersonic.ui.modal.show(modalView, options);
	
	
}
=======
			$scope.loadData();
		});
		$scope.rsvpevent = function()
			{

				var modalView = new supersonic.ui.View("example#settings");
				var options = {
					animate: true
				};
				supersonic.ui.modal.show(modalView, options);

>>>>>>> Stashed changes

			};

		$scope.loadData = function()
			{

			var firstGame;
			var contentWindows = [];
			gamesData.findAll().then(function(games){
				loadedGames = games;
				$scope.loadedGames = [];
				for (var i =0; i < games.length; i++){
					var currentGame = games[i];
					var currentLocation = new google.maps.LatLng(parseFloat(currentGame.Lat), parseFloat(currentGame.Lng));
					var currentSport = currentGame.Sport;
					var currentTime = currentGame.Time;
					$scope.loadedGames.push({
						Position : currentLocation,
						Sport: currentSport,
						Time: currentTime,
						MarkerID: i
					});
					map.panTo(currentLocation);
				}

			});

			console.log('working');
		};
	});
